{% set wl_prefix = {'regular': '', 'veteran': '2W_', 'elite': '3W_' }[wl] %}
{% for color in data %}
[t:template,n:{{ wl_prefix }}c24_3_crystal_archer_{{ color['color_name'] }}] { specializes = {{ wl_prefix }}c24_3_crystal_archer_{{ color['color_name'] }}_base; }
[t:template,n:{{ wl_prefix }}c24_3_crystal_archer_{{ color['color_name'] }}_base]
{
	specializes = {{ wl_prefix }}c24_3_base_crystal_archer;

	aspect:textures:0 = b_i_cav_gems-0{{ color['texture'] }}-static;  // {{ color['color_name'] }}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("ice_warrior");
				condition* = receive_world_message("WE_ENTERED_WORLD");
				single_shot = true;
			}
			// ADDED:
			[*]
			{
				condition* = receive_world_message("WE_ENTERED_WORLD");
				single_shot = true;
				no_trig_bits = true;
				action* = call_sfx_script("crystal_light_{{ color['light_color'] }}(sgx)");
			}
		}
	}
	[inventory]
	{
		[pcontent]
		{
			[all*]
			{
				es_shield_hand = c24_3_crystal_bow_{{ color['color_name'] }};
			}
		}
	}
	[physics]
	{
		[break_particulate]
		{
			frag_c24_3_crystal_ice_01_{{ color['color_name'] }} = 2;
			frag_c24_3_crystal_ice_02_{{ color['color_name'] }} = 2;
			frag_c24_3_crystal_ice_03_{{ color['color_name'] }} = 3;
			frag_c24_3_crystal_ice_04_{{ color['color_name'] }} = 2;
			frag_c24_3_crystal_ice_05_{{ color['color_name'] }} = 1;
			frag_c24_3_crystal_ice_06_{{ color['color_name'] }} = 2;
			frag_c24_3_crystal_ice_07_{{ color['color_name'] }} = 2;
			frag_c24_3_crystal_ice_08_{{ color['color_name'] }} = 2;
		}
	}
}
{% endfor %}
